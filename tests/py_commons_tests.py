# Copyright (c) 2019 Patrick Hart

# This work is licensed under the terms of the MIT license.
# For a copy, see <https://opensource.org/licenses/MIT>.
import unittest
import numpy as np
import matplotlib.pyplot as plt
from optimizer.commons import Parameter, CalculateJerk

class CommonsTests(unittest.TestCase):
  def test_jerk_calc(self):
    traj = np.array([[0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
                    [2.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
                    [4.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
                    [6.00009647e+00, 1.40718900e-02, 0., 0.]])
    jerk = CalculateJerk(traj, 0.2)
    print(jerk)

  def test_jerk_calc_real(self):
    traj = np.array([[0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
        [2.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
        [4.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
        [6.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.00000000e+01],
        [8.00009230e+00, 2.35358686e-02, 2.35336963e-02, 1.00027693e+01],
        [1.00003021e+01, 1.06189354e-01, 5.90641275e-02, 1.00174518e+01],
        [1.20005514e+01, 2.63759488e-01, 9.81616806e-02, 1.00482865e+01],
        [1.40007569e+01, 4.98099590e-01, 1.35091019e-01, 1.00917189e+01],
        [1.60008689e+01, 8.01933633e-01, 1.66420863e-01, 1.01396873e+01],
        [1.80008789e+01, 1.16274779e+00, 1.90551813e-01, 1.01837654e+01],
        [2.00008076e+01, 1.56581860e+00, 2.07204948e-01, 1.02178940e+01],
        [2.20006865e+01, 1.99643026e+00, 2.16956897e-01, 1.02393180e+01],
        [2.40005436e+01, 2.44135508e+00, 2.20869043e-01, 1.02482188e+01],
        [2.60003968e+01, 2.88969698e+00, 2.20212680e-01, 1.02467163e+01],
        [2.80002548e+01, 3.33321348e+00, 2.16270863e-01, 1.02377763e+01],
        [3.00001198e+01, 3.76623606e+00, 2.10197514e-01, 1.02243386e+01],
        [3.19999912e+01, 4.18530714e+00, 2.02922931e-01, 1.02087829e+01],
        [3.39998678e+01, 4.58864796e+00, 1.95103393e-01, 1.01927158e+01],
        [3.59997489e+01, 4.97556724e+00, 1.87116606e-01, 1.01769995e+01],
        [3.79996203e+01, 5.35420578e+00, 1.87116606e-01, 1.01769995e+01]])
    jerk = CalculateJerk(traj, 0.2)
    print(jerk)
if __name__ == '__main__':
  unittest.main()